{"version":3,"sources":["api/media.js","components/Player/player.jsx","components/Search/search.jsx","pages/Main/main.jsx","App.js","index.js"],"names":["client","createClient","process","getVideos","query","perPage","videos","search","per_page","orientation","then","data","Player","video","onEnded","onTimeUpdate","vidEl","isLoading","hasResults","hasVideo","Object","keys","length","className","ref","controls","muted","autoPlay","poster","video_pictures","picture","height","video_files","map","videoFile","src","link","type","file_type","id","href","url","user","target","rel","name","Search","handleSubmit","numberOfVideos","time","handleSearchChange","handleNumChange","handleTimeChange","onSubmit","disabled","value","placeholder","onChange","Array","from","i","Main","useRef","useState","displayVideos","setDisplayVideos","setHasResults","currentVid","setCurrentVid","vidIndex","setVidIndex","setIsLoading","values","setValues","useEffect","current","load","getData","a","Api","total_results","window","alert","console","error","getNextVideo","prev","e","preventDefault","currentTime","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.944bea3e.chunk.js","sourcesContent":["import { createClient } from 'pexels'\n\nconst { REACT_APP_PEXELS_KEY } = process.env\nconst client = createClient(REACT_APP_PEXELS_KEY)\n\nexport const getVideos = ({ query, perPage }) =>\n  client.videos.search({ query, per_page: perPage, orientation: 'landscape' }).then(data => data)\n","import './player.css'\n\nconst Player = ({ video, onEnded, onTimeUpdate, vidEl, isLoading, hasResults }) => {\n  const hasVideo = video && Object.keys(video).length !== 0\n\n  return (\n    <div className=\"player\">\n      {hasVideo && (\n        <>\n          <video\n            ref={vidEl}\n            onEnded={onEnded}\n            onTimeUpdate={onTimeUpdate}\n            controls\n            muted\n            autoPlay\n            poster={video.video_pictures[0].picture}\n            height=\"500px\"\n          >\n            {video.video_files.map(videoFile => (\n              <source key={videoFile.id} src={videoFile.link} type={videoFile.file_type} />\n            ))}\n            <p>\n              Your browser doesn't support HTML5 video. Here is a <a href={video.url}>link to the video</a> instead.\n            </p>\n          </video>\n          <div className=\"overlay\">\n            <a href={video.user?.url} target=\"_blank\" rel=\"noreferrer\">\n              {video.user?.name}\n            </a>\n          </div>\n        </>\n      )}\n      {isLoading && (\n        <div className=\"loader\">\n          <div className=\"loader_text\">loading ....</div>\n          <div className=\"loader_element\"></div>\n        </div>\n      )}\n      {!hasResults && (\n        <div className=\"loader\">Sorry, there are no results for this search term. Try another search</div>\n      )}\n    </div>\n  )\n}\n\nexport default Player\n","import './search.css'\n\nconst Search = ({\n  handleSubmit,\n  query,\n  numberOfVideos,\n  time,\n  handleSearchChange,\n  handleNumChange,\n  handleTimeChange,\n  isLoading,\n}) => {\n  return (\n    <form className=\"search\" onSubmit={handleSubmit}>\n      <fieldset disabled={isLoading}>\n        <input\n          type=\"search\"\n          value={query}\n          placeholder=\"Search videos ex: tiger, beach...\"\n          onChange={handleSearchChange}\n        />\n        <input type=\"submit\" value=\"Submit\" />\n      </fieldset>\n      <fieldset disabled={isLoading}>\n        <label>Number of videos to play</label>\n        <select onChange={handleNumChange} value={numberOfVideos}>\n          <option key={0} value={0} disabled>\n            0\n          </option>\n          {Array.from(Array(10).keys()).map(i => {\n            const value = i + 1\n            return (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            )\n          })}\n        </select>\n      </fieldset>\n      <fieldset disabled={isLoading}>\n        <label>Each video plays for up to</label>\n        <select onChange={handleTimeChange} value={time}>\n          <option value={10}>10</option>\n          <option value={20}>20</option>\n          <option value={30}>30</option>\n        </select>\n      </fieldset>\n    </form>\n  )\n}\n\nexport default Search\n","import { useState, useEffect, useRef } from 'react'\nimport * as Api from '@api'\nimport { Search } from '@components'\nimport { Player } from '@components'\nimport './main.css'\n\nconst Main = () => {\n  const vidEl = useRef(null)\n  const [displayVideos, setDisplayVideos] = useState([])\n  const [hasResults, setHasResults] = useState(true)\n  const [currentVid, setCurrentVid] = useState(null)\n  const [vidIndex, setVidIndex] = useState(0)\n  const [isLoading, setIsLoading] = useState(false)\n  const [values, setValues] = useState({\n    query: '',\n    numberOfVideos: 10,\n    time: 10,\n  })\n\n  useEffect(() => {\n    setCurrentVid(displayVideos[vidIndex])\n  }, [vidIndex, displayVideos])\n\n  useEffect(() => {\n    if (currentVid) vidEl.current.load()\n  }, [currentVid])\n\n  const getData = async ({ query, perPage }) => {\n    setIsLoading(true)\n    try {\n      const { videos, total_results } = await Api.getVideos({ query, perPage })\n      setDisplayVideos(videos)\n      if (total_results < values.numberOfVideos) setValues({ ...values, numberOfVideos: total_results })\n      setHasResults(total_results !== 0)\n    } catch (e) {\n      window.alert(e)\n      console.error(e)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const getNextVideo = () => (vidIndex === displayVideos.length - 1 ? setVidIndex(0) : setVidIndex(prev => ++prev))\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    const { query, numberOfVideos } = values\n    if (!query) return\n    getData({ query, perPage: numberOfVideos })\n  }\n\n  const handleSearchChange = e => {\n    // If the previous search yielded zero results we need to reset the count to default\n    values.numberOfVideos === 0\n      ? setValues({ query: e.target.value, numberOfVideos: 10 })\n      : setValues({ ...values, query: e.target.value })\n  }\n\n  const handleTime = () => {\n    if (vidEl.current.currentTime > values.time) getNextVideo()\n  }\n\n  return (\n    <main>\n      <Search\n        handleSubmit={handleSubmit}\n        query={values.query}\n        numberOfVideos={values.numberOfVideos}\n        time={values.time}\n        handleSearchChange={handleSearchChange}\n        handleNumChange={e => setValues({ ...values, numberOfVideos: e.target.value })}\n        handleTimeChange={e => setValues({ ...values, time: e.target.value })}\n        isLoading={isLoading}\n      />\n      <Player\n        video={currentVid}\n        onEnded={() => getNextVideo()}\n        onTimeUpdate={() => handleTime()}\n        vidEl={vidEl}\n        isLoading={isLoading}\n        hasResults={hasResults}\n      />\n    </main>\n  )\n}\n\nexport default Main\n","import { Main } from '@pages'\nimport './App.css'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      Video Finder App\n      <Main />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}