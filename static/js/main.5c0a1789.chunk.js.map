{"version":3,"sources":["api/media.js","components/Player/components/Loader/loader.jsx","components/Player/components/ErrorModule/errorModule.jsx","components/Player/player.jsx","components/Search/search.jsx","pages/Main/main.jsx","App.js","index.js"],"names":["client","createClient","process","getVideos","query","perPage","videos","search","per_page","orientation","then","data","Loader","className","ErrorModule","message","Player","video","onEnded","onTimeUpdate","vidEl","isLoading","error","hasVideo","Object","keys","length","clsx","ref","controls","muted","autoPlay","poster","video_pictures","picture","height","video_files","map","videoFile","src","link","type","file_type","id","href","url","user","target","rel","name","hasError","Search","handleSubmit","count","time","handleSearchChange","handleCountChange","handleTimeChange","onSubmit","disabled","value","placeholder","onChange","title","undefined","Array","from","i","DEFAULTS","Main","COUNT","TIME","NO_RESULTS","useRef","useState","displayVideos","setDisplayVideos","currentVid","setCurrentVid","vidIndex","setVidIndex","setIsLoading","values","setValues","setError","useEffect","current","load","getData","a","Api","total_results","console","getNextVideo","prev","e","preventDefault","currentTime","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5c0a1789.chunk.js","sourcesContent":["import { createClient } from 'pexels'\n\nconst { REACT_APP_PEXELS_KEY } = process.env\nconst client = createClient(REACT_APP_PEXELS_KEY)\n\nexport const getVideos = ({ query, perPage }) =>\n  client.videos.search({ query, per_page: perPage, orientation: 'landscape' }).then(data => data)\n","import './loader.css'\n\nconst Loader = ({ className }) => (\n  <div className={className}>\n    <div className=\"loader_text\">loading ....</div>\n    <div className=\"loader_element\"></div>\n  </div>\n)\n\nexport default Loader\n","const ErrorModule = ({ className, message }) => (\n  <div className={className}>{message || 'Sorry, there are no results for this search term. Try another search'}</div>\n)\n\nexport default ErrorModule\n","import clsx from 'clsx'\nimport { Loader } from './components'\nimport { ErrorModule } from './components'\nimport './player.css'\n\nconst Player = ({ video, onEnded, onTimeUpdate, vidEl, isLoading, error }) => {\n  const hasVideo = video && Object.keys(video).length !== 0\n\n  return (\n    <div className={clsx('player', !hasVideo && 'empty')}>\n      {hasVideo && (\n        <>\n          <video\n            ref={vidEl}\n            onEnded={onEnded}\n            onTimeUpdate={onTimeUpdate}\n            controls\n            muted\n            autoPlay\n            poster={video.video_pictures[0].picture}\n            height=\"500px\"\n          >\n            {video.video_files.map(videoFile => (\n              <source key={videoFile.id} src={videoFile.link} type={videoFile.file_type} />\n            ))}\n            <p>\n              Your browser doesn't support HTML5 video. Here is a <a href={video.url}>link to the video</a> instead.\n            </p>\n          </video>\n          <div className=\"caption\">\n            <a href={video.user?.url} target=\"_blank\" rel=\"noreferrer\">\n              {video.user?.name}\n            </a>\n          </div>\n        </>\n      )}\n      {isLoading && <Loader className=\"overlay\" />}\n      {error.hasError && <ErrorModule className=\"overlay\" message={error.message} />}\n    </div>\n  )\n}\n\nexport default Player\n","import './search.css'\n\nconst Search = ({\n  handleSubmit,\n  query,\n  count,\n  time,\n  handleSearchChange,\n  handleCountChange,\n  handleTimeChange,\n  isLoading,\n}) => {\n  return (\n    <form className=\"form\" onSubmit={handleSubmit}>\n      <fieldset disabled={isLoading}>\n        <input\n          className=\"search\"\n          type=\"search\"\n          value={query}\n          placeholder=\"Search videos\"\n          onChange={handleSearchChange}\n        />\n        <input\n          className=\"submit\"\n          type=\"submit\"\n          value=\"Submit\"\n          title={query ? `Click to search for ${count} ${query} videos playing each for ${time}s` : undefined}\n        />\n      </fieldset>\n      <fieldset disabled={isLoading}>\n        <label>Number of videos to play</label>\n        <select onChange={handleCountChange} value={count}>\n          <option key={0} value={0} disabled>\n            0\n          </option>\n          {Array.from(Array(10).keys()).map(i => {\n            const value = i + 1\n            return (\n              <option key={value} value={value}>\n                {value}\n              </option>\n            )\n          })}\n        </select>\n      </fieldset>\n      <fieldset disabled={isLoading}>\n        <label>Each video plays for up to</label>\n        <select onChange={handleTimeChange} value={time}>\n          <option value={10}>10s</option>\n          <option value={20}>20s</option>\n          <option value={30}>30s</option>\n        </select>\n      </fieldset>\n    </form>\n  )\n}\n\nexport default Search\n","import { useState, useEffect, useRef } from 'react'\nimport * as Api from '@api'\nimport { Search } from '@components'\nimport { Player } from '@components'\nimport './main.css'\n\nconst DEFAULTS = {\n  COUNT: 10,\n  TIME: 10,\n  NO_RESULTS: 0,\n}\n\nconst Main = () => {\n  const { COUNT, TIME, NO_RESULTS } = DEFAULTS\n  const vidEl = useRef(null)\n  const [displayVideos, setDisplayVideos] = useState([])\n  const [currentVid, setCurrentVid] = useState(null)\n  const [vidIndex, setVidIndex] = useState(0)\n  const [isLoading, setIsLoading] = useState(false)\n  const [values, setValues] = useState({\n    query: '',\n    count: COUNT,\n    time: TIME,\n  })\n  const [error, setError] = useState({\n    hasError: false,\n    message: '',\n  })\n\n  useEffect(() => {\n    setCurrentVid(displayVideos[vidIndex])\n  }, [vidIndex, displayVideos])\n\n  useEffect(() => {\n    if (currentVid) vidEl.current.load()\n  }, [currentVid])\n\n  const getData = async ({ query, perPage }) => {\n    setIsLoading(true)\n    try {\n      const { videos, total_results } = await Api.getVideos({ query, perPage })\n      setDisplayVideos(videos)\n      if (total_results < values.count) setValues({ ...values, count: total_results })\n      setError({ hasError: total_results === NO_RESULTS, message: '' })\n    } catch (e) {\n      setError({ hasError: true, message: e.message })\n      console.error(e)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const getNextVideo = () => (vidIndex === displayVideos.length - 1 ? setVidIndex(0) : setVidIndex(prev => ++prev))\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    const { query, count } = values\n    if (!query) return\n    // Reset\n    setError({ hasError: false, message: '' })\n    setDisplayVideos([])\n\n    getData({ query, perPage: count })\n  }\n\n  const handleSearchChange = e => {\n    // If the previous search yielded zero results we need to reset the count to default\n    values.count === NO_RESULTS\n      ? setValues({ ...values, query: e.target.value, count: COUNT })\n      : setValues({ ...values, query: e.target.value })\n  }\n\n  const handleTime = () => {\n    if (vidEl.current.currentTime > values.time) getNextVideo()\n  }\n\n  return (\n    <main>\n      <Search\n        handleSubmit={handleSubmit}\n        query={values.query}\n        count={values.count}\n        time={values.time}\n        handleSearchChange={handleSearchChange}\n        handleCountChange={e => setValues({ ...values, count: e.target.value })}\n        handleTimeChange={e => setValues({ ...values, time: e.target.value })}\n        isLoading={isLoading}\n      />\n      <Player\n        video={currentVid}\n        onEnded={() => getNextVideo()}\n        onTimeUpdate={() => handleTime()}\n        vidEl={vidEl}\n        isLoading={isLoading}\n        error={error}\n      />\n    </main>\n  )\n}\n\nexport default Main\n","import { Main } from '@pages'\n\nconst App = () => {\n  return (\n    <>\n      <h1>Video Finder App</h1>\n      <Main />\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}